\makeatletter
\def\@cite#1{{\fontseries{n}\selectfont\textsuperscript{\,[#1]}}}
\def\@biblabel#1{[#1]}
\def\includeall#1{{\@for\next:=#1\do{\include{\next}}}}
\ifupTeX
\renewcommand\rmdefault{uop}
\renewcommand\sfdefault{zhsf}
\newcommand\my@emph{\fontfamily{fvs}\fontseries{b}\fontshape{sl}\selectfont}
\else\ifluatex
\setmainfont[Ligatures=TeX]{URWClassico}
\setsansfont[Ligatures=TeX]{TeXGyreHeros}
\newcommand\my@emph{\setmainfont{Times New Roman Bold Italic}}
\else\ifxetex
\setmainfont[Ligatures=TeX]{URWClassico-Regular.otf}
\setsansfont[Ligatures=TeX]{Helvetica}
\newcommand\my@emph{\setmainfont{Times New Roman Bold Italic}}
\fi\fi\fi
\newcommand\my@bold{\fontfamily{zhsf}\fontseries{bx}\selectfont}
\newcommand\my@sans{\fontfamily{zhmg}\fontshape{it}\selectfont}
\newcommand\my@roman{\fontfamily{lmr}\selectfont\mcfamily}
\newcommand\my@pagefont{\fontfamily{clmj}\selectfont}
\newcommand\my@sectionfont{\fontfamily{pnc}\fontshape{sc}\selectfont}
\newcommand\EMPH[1]{{\my@emph #1}}
\newcommand\ROMAN[1]{{\my@roman #1}}
\newcommand\BOLD[1]{{\my@bold #1}}
\def\SANS[#1]{{\my@sans #1}}
\newcommand\FLOAT[1]{\vspace{18pt}\begin{screen}{#1}\end{screen}\par}
\renewcommand\familydefault{\rmdefault}
\renewcommand\kanjifamilydefault{\gtdefault}
\def\my@defineTitle(#1;#2;#3){\csname #1\endcsname#3{\ROMAN{#2}}}
\newcommand\my@defineMytitle{\@ifstar{\my@@defineMytitle}{\my@@@defineMytitle}}
\newcommand\my@@defineMytitle[2]{\expandafter\def\csname my@#1\endcsname{(#1;#2;[*])}}
\newcommand\my@@@defineMytitle[2]{\expandafter\def\csname my@#1\endcsname{(#1;#2;)}}
\my@defineMytitle{title}{Notes of Mathematics}
\my@defineMytitle*{author}{Masato Nakata}
\my@defineMytitle*{affil}{Department of Science, Kyoto University}
\my@defineMytitle{date}{Since Aug 27, 2017}
\@for\next:=\my@title,\my@author,\my@affil,\my@date\do{%
  \expandafter\expandafter\expandafter\my@defineTitle\next}
\renewcommand\refname{References}
\renewcommand\contentsname{Contents}
\renewcommand\cfttoctitlefont{\sffamily\Large}
\renewcommand\cftsecfont{\my@bold}
\renewcommand\cftsecpagefont{\my@bold}
\renewcommand\cftsubsecfont{\sffamily}
\renewcommand\cftsubsecpagefont{\my@pagefont}
\fancyhf{}\cfoot{{\my@pagefont\thepage}}
\fancypagestyle{onContentsPage}{\renewcommand{\headrulewidth}{0pt}}
\fancypagestyle{onDocumentsPage}{%
  \renewcommand{\headrulewidth}{0.3pt}%
  \lhead{{\nouppercase{\leftmark}}}\rhead{\rightmark}}
\newcommand\prepend{%
  \thispagestyle{onContentsPage}\pagestyle{onContentsPage}\pagenumbering{roman}\maketitle\tableofcontents
  \newpage\pagestyle{onDocumentsPage}\pagenumbering{arabic}}
\setlist[enumerate,1]{label={\fontfamily{pnc}\fontseries{b}\selectfont\roman{enumi}})}
\setlist[itemize,1]{label={\fontfamily{lmr}\selectfont\textleaf}}
\bibliographystyle{jplain}
\newcounter{my@TheoremCounter}\newcounter{my@thmcounter}\setcounter{my@TheoremCounter}{0}
\newcommand\my@subsubsection[3]{\stepcounter{my@TheoremCounter}%
  \expandafter\def\expandafter\themy@thmcounter{[#1 \thesubsection.\themy@TheoremCounter]}%
  \refstepcounter{my@thmcounter}\label{#3}%
  \FLOAT{\expandafter\SANS\themy@thmcounter\quad\BOLD{#2}}}
\def\my@defineThm[#1;#2]{\expandafter\def\csname my@#1\endcsname ##1,##2;{\my@subsubsection{#2}{##1}{##2}}%
  \expandafter\newcommand\csname #1\endcsname[1]{\csname my@#1\endcsname ##1;}}
\@for\next:=[THM;Theorem],[DEF;Definition],[PROP;Proposition],[DPROP;Definition \& Proposition],[EX;Example],[LEM;Lemma],[COR;Corollary]\do{%
  \expandafter\expandafter\expandafter\my@defineThm\next}
\let\my@oldsection\section\let\my@oldsubsection\subsection
\newcommand\my@@section{\@ifstar{\my@oldsection}{\my@oldsection*}}\newcommand\my@@subsection{\@ifstar{\my@oldsubsection}{\my@oldsubsection*}}
\newcommand\my@section[1]{\my@oldsection{{\my@sectionfont #1}}}
\newcommand\my@subsection[1]{\setcounter{my@TheoremCounter}{0}\my@oldsubsection{{\sffamily #1}}\vspace{-13pt}}
\renewcommand\subsection{\@ifstar{\my@@subsection}{\my@subsection}}\renewcommand\section{\@ifstar{\my@@section}{\my@section}}
